.code-system-tree {
    padding: 1rem 0 1rem 1rem;

    & > ul[role="tree"] { // Chapter titles

        & > li > span > a[role="treeitem"] {
            font-weight: 600;
        }
    }

    ul {
        margin: 0;
        padding: 0;
        list-style: none;
        position: relative;
    }

    a {
        text-decoration: none;
        color: $blue;
        padding: .25em 1.5em .25em .25em;
        margin-left: 1.75em;

        &:hover {
            background-color: $green;
        }

        &:focus {
            background-color: $blue;
            color: $green;
        }
    }

    :focus {
        outline: 0;
    }

    .focus {
        background-color: $blue;
        color: $green;

        a {
            color: $green;

            &:hover {
                background-color: $blue;
            }
        }
    }

    li {
        padding: .25em 0;
        position: relative;

        &:first-child {
            margin-top: .25em;
        }

        &:last-child {
            padding-bottom: 0;
        }

        &[role="none"] {
            padding-left: 1.75em;

            a {
                margin-left: 0;
            }
        }

        &:not(:last-child), &[role="none"]:last-child {
            &::before {
                content: "";
                position: absolute;
                left: .75em;
                top: .75em;
                width: 0;
                bottom: -1em;
                border-left: 1px dashed $light-grey;
            }
        }

        &[role="none"]:last-child {
            &::before {
                bottom: .5em;
            }
        }
    }

    ul[role="group"] {
        margin-left: 2em;
    }

    [role="treeitem"],
    [role="treeitem"] span {
        display: block;
    }

    [role="treeitem"] {
        position: relative;

        & > span {
            position: relative;

            &::before {
                content: "";
                position: absolute;
                background: url("/assets/images/tree-minus.svg") center / 1em no-repeat;
                width: 1em;
                height: 1em;
                top: .45em;
                left: .25em;
            }
        }

        &.focus {
            & > span {
                &::before {
                    background-image: url("/assets/images/tree-minus-green.svg");
                }
            }
        }

        &[aria-expanded="false"] {

            &.focus {
                & > span {
                    &::before {
                        background-image: url("/assets/images/tree-plus-green.svg");
                    }
                }
            }

            & > ul {
                display: none;
            }

            & > span {
                &::before {
                    background-image: url("/assets/images/tree-plus.svg");
                }
            }
        }

        &[aria-expanded="true"] {
            & > ul {
                display: block;
            }
        }

    }
}