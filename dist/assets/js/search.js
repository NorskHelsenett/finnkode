/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/search.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/search.js":
/*!**************************!*\
  !*** ./src/js/search.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./search/datepicker */ \"./src/js/search/datepicker.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvc2VhcmNoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3NlYXJjaC5qcz84MGU0Il0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4vc2VhcmNoL2RhdGVwaWNrZXInKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/search.js\n");

/***/ }),

/***/ "./src/js/search/datepicker.js":
/*!*************************************!*\
  !*** ./src/js/search/datepicker.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// https://dequeuniversity.com/library/aria/date-pickers/sf-date-picker\r\n// console.log(\"search.js - datepicker.js\");\r\n\r\n$(function () {\r\n    $('#datepicker').datepicker({\r\n        showOn: 'button',\r\n        buttonImage: '/images/calendar-blue.svg', // File (and file path) for the calendar image\r\n        buttonImageOnly: false,\r\n        buttonText: 'Vis kalender',\r\n        dayNamesShort: [ \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\", \"Søndag\" ],\r\n        showButtonPanel: true,\r\n        closeText: 'Lukk',\r\n        onClose: removeAria\r\n    });\r\n\r\n    // Add aria-describedby to the button referring to the label\r\n    $('.ui-datepicker-trigger').attr('aria-labelledby', 'datepickerLabel');\r\n\r\n    dayTripper();\r\n\r\n});\r\n\r\nfunction dayTripper() {\r\n    $('.ui-datepicker-trigger').click(function () {\r\n        setTimeout(function () {\r\n            var today = $('.ui-datepicker-today a')[0];\r\n\r\n            if (!today) {\r\n                today = $('.ui-state-active')[0] ||\r\n                    $('.ui-state-default')[0];\r\n            }\r\n\r\n\r\n            // Hide the entire page (except the date picker)\r\n            // from screen readers to prevent document navigation\r\n            // (by headings, etc.) while the popup is open\r\n            $(\"main\").attr('id','dp-container');\r\n            $(\"#dp-container\").attr('aria-hidden','true');\r\n            $(\"#skipnav\").attr('aria-hidden','true');\r\n\r\n            // Hide the \"today\" button because it doesn't do what\r\n            // you think it supposed to do\r\n            $(\".ui-datepicker-current\").hide();\r\n\r\n            today.focus();\r\n            datePickHandler();\r\n            $(document).on('click', '#ui-datepicker-div .ui-datepicker-close', function () {\r\n                closeCalendar();\r\n            });\r\n        }, 0);\r\n    });\r\n}\r\n\r\nfunction datePickHandler() {\r\n    var activeDate;\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    var input = document.getElementById('datepicker');\r\n\r\n    if (!container || !input) {\r\n        return;\r\n    }\r\n\r\n    // $(container).find('table').first().attr('role', 'grid');\r\n\r\n    container.setAttribute('role', 'application');\r\n    container.setAttribute('aria-label', 'Calendar view date-picker');\r\n\r\n    // the top controls:\r\n    var prev = $('.ui-datepicker-prev', container)[0],\r\n        next = $('.ui-datepicker-next', container)[0];\r\n\r\n\r\n// This is the line that needs to be fixed for use on pages with base URL set in head\r\n    next.href = 'javascript:void(0)';\r\n    prev.href = 'javascript:void(0)';\r\n\r\n    next.setAttribute('role', 'button');\r\n    next.removeAttribute('title');\r\n    prev.setAttribute('role', 'button');\r\n    prev.removeAttribute('title');\r\n\r\n    appendOffscreenMonthText(next);\r\n    appendOffscreenMonthText(prev);\r\n\r\n    // delegation won't work here for whatever reason, so we are\r\n    // forced to attach individual click listeners to the prev /\r\n    // next month buttons each time they are added to the DOM\r\n    $(next).on('click', handleNextClicks);\r\n    $(prev).on('click', handlePrevClicks);\r\n\r\n    monthDayYearText();\r\n\r\n    $(container).on('keydown', function calendarKeyboardListener(keyVent) {\r\n        var which = keyVent.which;\r\n        var target = keyVent.target;\r\n        var dateCurrent = getCurrentDate(container);\r\n\r\n        if (!dateCurrent) {\r\n            dateCurrent = $('a.ui-state-default')[0];\r\n            setHighlightState(dateCurrent, container);\r\n        }\r\n\r\n        if (27 === which) {\r\n            keyVent.stopPropagation();\r\n            return closeCalendar();\r\n        } else if (which === 9 && keyVent.shiftKey) { // SHIFT + TAB\r\n            keyVent.preventDefault();\r\n            if ($(target).hasClass('ui-datepicker-close')) { // close button\r\n                $('.ui-datepicker-prev')[0].focus();\r\n            } else if ($(target).hasClass('ui-state-default')) { // a date link\r\n                $('.ui-datepicker-close')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) { // the prev link\r\n                $('.ui-datepicker-next')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) { // the next link\r\n                activeDate = $('.ui-state-highlight') ||\r\n                    $('.ui-state-active')[0];\r\n                if (activeDate) {\r\n                    activeDate.focus();\r\n                }\r\n            }\r\n        } else if (which === 9) { // TAB\r\n            keyVent.preventDefault();\r\n            if ($(target).hasClass('ui-datepicker-close')) { // close button\r\n                activeDate = $('.ui-state-highlight') ||\r\n                    $('.ui-state-active')[0];\r\n                if (activeDate) {\r\n                    activeDate.focus();\r\n                }\r\n            } else if ($(target).hasClass('ui-state-default')) {\r\n                $('.ui-datepicker-next')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) {\r\n                $('.ui-datepicker-prev')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) {\r\n                $('.ui-datepicker-close')[0].focus();\r\n            }\r\n        } else if (which === 37) { // LEFT arrow key\r\n            // if we're on a date link...\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                previousDay(target);\r\n            }\r\n        } else if (which === 39) { // RIGHT arrow key\r\n            // if we're on a date link...\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                nextDay(target);\r\n            }\r\n        } else if (which === 38) { // UP arrow key\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                upHandler(target, container, prev);\r\n            }\r\n        } else if (which === 40) { // DOWN arrow key\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                downHandler(target, container, next);\r\n            }\r\n        } else if (which === 13) { // ENTER\r\n            if ($(target).hasClass('ui-state-default')) {\r\n                setTimeout(function () {\r\n                    closeCalendar();\r\n                }, 100);\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) {\r\n                handlePrevClicks();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) {\r\n                handleNextClicks();\r\n            }\r\n        } else if (32 === which) {\r\n            if ($(target).hasClass('ui-datepicker-prev') || $(target).hasClass('ui-datepicker-next')) {\r\n                target.click();\r\n            }\r\n        } else if (33 === which) { // PAGE UP\r\n            moveOneMonth(target, 'prev');\r\n        } else if (34 === which) { // PAGE DOWN\r\n            moveOneMonth(target, 'next');\r\n        } else if (36 === which) { // HOME\r\n            var firstOfMonth = $(target).closest('tbody').find('.ui-state-default')[0];\r\n            if (firstOfMonth) {\r\n                firstOfMonth.focus();\r\n                setHighlightState(firstOfMonth, $('#ui-datepicker-div')[0]);\r\n            }\r\n        } else if (35 === which) { // END\r\n            var $daysOfMonth = $(target).closest('tbody').find('.ui-state-default');\r\n            var lastDay = $daysOfMonth[$daysOfMonth.length - 1];\r\n            if (lastDay) {\r\n                lastDay.focus();\r\n                setHighlightState(lastDay, $('#ui-datepicker-div')[0]);\r\n            }\r\n        }\r\n        $(\".ui-datepicker-current\").hide();\r\n    });\r\n}\r\n\r\nfunction closeCalendar() {\r\n    var container = $('#ui-datepicker-div');\r\n    $(container).off('keydown');\r\n    var input = $('#datepicker')[0];\r\n    $(input).datepicker('hide');\r\n\r\n    input.focus();\r\n}\r\n\r\nfunction removeAria() {\r\n    // make the rest of the page accessible again:\r\n    $(\"#dp-container\").removeAttr('aria-hidden');\r\n    $(\"#skipnav\").removeAttr('aria-hidden');\r\n}\r\n\r\n///////////////////////////////\r\n//////////////////////////// //\r\n///////////////////////// // //\r\n// UTILITY-LIKE THINGS // // //\r\n///////////////////////// // //\r\n//////////////////////////// //\r\n///////////////////////////////\r\nfunction isOdd(num) {\r\n    return num % 2;\r\n}\r\n\r\nfunction moveOneMonth(currentDate, dir) {\r\n    var button = (dir === 'next')\r\n        ? $('.ui-datepicker-next')[0]\r\n        : $('.ui-datepicker-prev')[0];\r\n\r\n    if (!button) {\r\n        return;\r\n    }\r\n\r\n    var ENABLED_SELECTOR = '#ui-datepicker-div tbody td:not(.ui-state-disabled)';\r\n    var $currentCells = $(ENABLED_SELECTOR);\r\n    var currentIdx = $.inArray(currentDate.parentNode, $currentCells);\r\n\r\n    button.click();\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n\r\n        var $newCells = $(ENABLED_SELECTOR);\r\n        var newTd = $newCells[currentIdx];\r\n        var newAnchor = newTd && $(newTd).find('a')[0];\r\n\r\n        while (!newAnchor) {\r\n            currentIdx--;\r\n            newTd = $newCells[currentIdx];\r\n            newAnchor = newTd && $(newTd).find('a')[0];\r\n        }\r\n\r\n        setHighlightState(newAnchor, $('#ui-datepicker-div')[0]);\r\n        newAnchor.focus();\r\n\r\n    }, 0);\r\n\r\n}\r\n\r\nfunction handleNextClicks() {\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n        prepHighlightState();\r\n        $('.ui-datepicker-next').focus();\r\n        $(\".ui-datepicker-current\").hide();\r\n    }, 0);\r\n}\r\n\r\nfunction handlePrevClicks() {\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n        prepHighlightState();\r\n        $('.ui-datepicker-prev').focus();\r\n        $(\".ui-datepicker-current\").hide();\r\n    }, 0);\r\n}\r\n\r\nfunction previousDay(dateLink) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!dateLink) {\r\n        return;\r\n    }\r\n    var td = $(dateLink).closest('td');\r\n    if (!td) {\r\n        return;\r\n    }\r\n\r\n    var prevTd = $(td).prev(),\r\n        prevDateLink = $('a.ui-state-default', prevTd)[0];\r\n\r\n    if (prevTd && prevDateLink) {\r\n        setHighlightState(prevDateLink, container);\r\n        prevDateLink.focus();\r\n    } else {\r\n        handlePrevious(dateLink);\r\n    }\r\n}\r\n\r\n\r\nfunction handlePrevious(target) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var currentRow = $(target).closest('tr');\r\n    if (!currentRow) {\r\n        return;\r\n    }\r\n    var previousRow = $(currentRow).prev();\r\n\r\n    if (!previousRow || previousRow.length === 0) {\r\n        // there is not previous row, so we go to previous month...\r\n        previousMonth();\r\n    } else {\r\n        var prevRowDates = $('td a.ui-state-default', previousRow);\r\n        var prevRowDate = prevRowDates[prevRowDates.length - 1];\r\n\r\n        if (prevRowDate) {\r\n            setTimeout(function () {\r\n                setHighlightState(prevRowDate, container);\r\n                prevRowDate.focus();\r\n            }, 0);\r\n        }\r\n    }\r\n}\r\n\r\nfunction previousMonth() {\r\n    var prevLink = $('.ui-datepicker-prev')[0];\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    prevLink.click();\r\n    // focus last day of new month\r\n    setTimeout(function () {\r\n        var trs = $('tr', container),\r\n            lastRowTdLinks = $('td a.ui-state-default', trs[trs.length - 1]),\r\n            lastDate = lastRowTdLinks[lastRowTdLinks.length - 1];\r\n\r\n        // updating the cached header elements\r\n        updateHeaderElements();\r\n\r\n        setHighlightState(lastDate, container);\r\n        lastDate.focus();\r\n\r\n    }, 0);\r\n}\r\n\r\n///////////////// NEXT /////////////////\r\n/**\r\n * Handles right arrow key navigation\r\n * @param  {HTMLElement} dateLink The target of the keyboard event\r\n */\r\nfunction nextDay(dateLink) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!dateLink) {\r\n        return;\r\n    }\r\n    var td = $(dateLink).closest('td');\r\n    if (!td) {\r\n        return;\r\n    }\r\n    var nextTd = $(td).next(),\r\n        nextDateLink = $('a.ui-state-default', nextTd)[0];\r\n\r\n    if (nextTd && nextDateLink) {\r\n        setHighlightState(nextDateLink, container);\r\n        nextDateLink.focus(); // the next day (same row)\r\n    } else {\r\n        handleNext(dateLink);\r\n    }\r\n}\r\n\r\nfunction handleNext(target) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var currentRow = $(target).closest('tr'),\r\n        nextRow = $(currentRow).next();\r\n\r\n    if (!nextRow || nextRow.length === 0) {\r\n        nextMonth();\r\n    } else {\r\n        var nextRowFirstDate = $('a.ui-state-default', nextRow)[0];\r\n        if (nextRowFirstDate) {\r\n            setHighlightState(nextRowFirstDate, container);\r\n            nextRowFirstDate.focus();\r\n        }\r\n    }\r\n}\r\n\r\nfunction nextMonth() {\r\n    nextMon = $('.ui-datepicker-next')[0];\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    nextMon.click();\r\n    // focus the first day of the new month\r\n    setTimeout(function () {\r\n        // updating the cached header elements\r\n        updateHeaderElements();\r\n\r\n        var firstDate = $('a.ui-state-default', container)[0];\r\n        setHighlightState(firstDate, container);\r\n        firstDate.focus();\r\n    }, 0);\r\n}\r\n\r\n/////////// UP ///////////\r\n/**\r\n * Handle the up arrow navigation through dates\r\n * @param  {HTMLElement} target   The target of the keyboard event (day)\r\n * @param  {HTMLElement} cont     The calendar container\r\n * @param  {HTMLElement} prevLink Link to navigate to previous month\r\n */\r\nfunction upHandler(target, cont, prevLink) {\r\n    prevLink = $('.ui-datepicker-prev')[0];\r\n    var rowContext = $(target).closest('tr');\r\n    if (!rowContext) {\r\n        return;\r\n    }\r\n    var rowTds = $('td', rowContext),\r\n        rowLinks = $('a.ui-state-default', rowContext),\r\n        targetIndex = $.inArray(target, rowLinks),\r\n        prevRow = $(rowContext).prev(),\r\n        prevRowTds = $('td', prevRow),\r\n        parallel = prevRowTds[targetIndex],\r\n        linkCheck = $('a.ui-state-default', parallel)[0];\r\n\r\n    if (prevRow && parallel && linkCheck) {\r\n        // there is a previous row, a td at the same index\r\n        // of the target AND theres a link in that td\r\n        setHighlightState(linkCheck, cont);\r\n        linkCheck.focus();\r\n    } else {\r\n        // we're either on the first row of a month, or we're on the\r\n        // second and there is not a date link directly above the target\r\n        prevLink.click();\r\n        setTimeout(function () {\r\n            // updating the cached header elements\r\n            updateHeaderElements();\r\n            var newRows = $('tr', cont),\r\n                lastRow = newRows[newRows.length - 1],\r\n                lastRowTds = $('td', lastRow),\r\n                tdParallelIndex = $.inArray(target.parentNode, rowTds),\r\n                newParallel = lastRowTds[tdParallelIndex],\r\n                newCheck = $('a.ui-state-default', newParallel)[0];\r\n\r\n            if (lastRow && newParallel && newCheck) {\r\n                setHighlightState(newCheck, cont);\r\n                newCheck.focus();\r\n            } else {\r\n                // theres no date link on the last week (row) of the new month\r\n                // meaning its an empty cell, so we'll try the 2nd to last week\r\n                var secondLastRow = newRows[newRows.length - 2],\r\n                    secondTds = $('td', secondLastRow),\r\n                    targetTd = secondTds[tdParallelIndex],\r\n                    linkCheck = $('a.ui-state-default', targetTd)[0];\r\n\r\n                if (linkCheck) {\r\n                    setHighlightState(linkCheck, cont);\r\n                    linkCheck.focus();\r\n                }\r\n\r\n            }\r\n        }, 0);\r\n    }\r\n}\r\n\r\n//////////////// DOWN ////////////////\r\n/**\r\n * Handles down arrow navigation through dates in calendar\r\n * @param  {HTMLElement} target   The target of the keyboard event (day)\r\n * @param  {HTMLElement} cont     The calendar container\r\n * @param  {HTMLElement} nextLink Link to navigate to next month\r\n */\r\nfunction downHandler(target, cont, nextLink) {\r\n    nextLink = $('.ui-datepicker-next')[0];\r\n    var targetRow = $(target).closest('tr');\r\n    if (!targetRow) {\r\n        return;\r\n    }\r\n    var targetCells = $('td', targetRow),\r\n        cellIndex = $.inArray(target.parentNode, targetCells), // the td (parent of target) index\r\n        nextRow = $(targetRow).next(),\r\n        nextRowCells = $('td', nextRow),\r\n        nextWeekTd = nextRowCells[cellIndex],\r\n        nextWeekCheck = $('a.ui-state-default', nextWeekTd)[0];\r\n\r\n    if (nextRow && nextWeekTd && nextWeekCheck) {\r\n        // theres a next row, a TD at the same index of `target`,\r\n        // and theres an anchor within that td\r\n        setHighlightState(nextWeekCheck, cont);\r\n        nextWeekCheck.focus();\r\n    } else {\r\n        nextLink.click();\r\n\r\n        setTimeout(function () {\r\n            // updating the cached header elements\r\n            updateHeaderElements();\r\n\r\n            var nextMonthTrs = $('tbody tr', cont),\r\n                firstTds = $('td', nextMonthTrs[0]),\r\n                firstParallel = firstTds[cellIndex],\r\n                firstCheck = $('a.ui-state-default', firstParallel)[0];\r\n\r\n            if (firstParallel && firstCheck) {\r\n                setHighlightState(firstCheck, cont);\r\n                firstCheck.focus();\r\n            } else {\r\n                // lets try the second row b/c we didnt find a\r\n                // date link in the first row at the target's index\r\n                var secondRow = nextMonthTrs[1],\r\n                    secondTds = $('td', secondRow),\r\n                    secondRowTd = secondTds[cellIndex],\r\n                    secondCheck = $('a.ui-state-default', secondRowTd)[0];\r\n\r\n                if (secondRow && secondCheck) {\r\n                    setHighlightState(secondCheck, cont);\r\n                    secondCheck.focus();\r\n                }\r\n            }\r\n        }, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction onCalendarHide() {\r\n    closeCalendar();\r\n}\r\n\r\n// add an aria-label to the date link indicating the currently focused date\r\n// (formatted identically to the required format: mm/dd/yyyy)\r\nfunction monthDayYearText() {\r\n    var cleanUps = $('.amaze-date');\r\n\r\n    $(cleanUps).each(function (clean) {\r\n        // each(cleanUps, function (clean) {\r\n        clean.parentNode.removeChild(clean);\r\n    });\r\n\r\n    var datePickDiv = document.getElementById('ui-datepicker-div');\r\n    // in case we find no datepick div\r\n    if (!datePickDiv) {\r\n        return;\r\n    }\r\n\r\n    var dates = $('a.ui-state-default', datePickDiv);\r\n    $(dates).attr('role', 'button').on('keydown', function (e) {\r\n        if (e.which === 32) {\r\n            e.preventDefault();\r\n            e.target.click();\r\n            setTimeout(function () {\r\n                closeCalendar();\r\n            }, 100);\r\n        }\r\n    });\r\n    $(dates).each(function (index, date) {\r\n        var currentRow = $(date).closest('tr'),\r\n            currentTds = $('td', currentRow),\r\n            currentIndex = $.inArray(date.parentNode, currentTds),\r\n            headThs = $('thead tr th', datePickDiv),\r\n            dayIndex = headThs[currentIndex],\r\n            daySpan = $('span', dayIndex)[0],\r\n            monthName = $('.ui-datepicker-month', datePickDiv)[0].innerHTML,\r\n            year = $('.ui-datepicker-year', datePickDiv)[0].innerHTML,\r\n            number = date.innerHTML;\r\n\r\n        if (!daySpan || !monthName || !number || !year) {\r\n            return;\r\n        }\r\n\r\n        // AT Reads: {month} {date} {year} {day}\r\n        // \"December 18 2014 Thursday\"\r\n        var dateText = date.innerHTML + ' ' + monthName + ' ' + year + ' ' + daySpan.title;\r\n        // AT Reads: {date(number)} {name of day} {name of month} {year(number)}\r\n        // var dateText = date.innerHTML + ' ' + daySpan.title + ' ' + monthName + ' ' + year;\r\n        // add an aria-label to the date link reading out the currently focused date\r\n        date.setAttribute('aria-label', dateText);\r\n    });\r\n}\r\n\r\n\r\n\r\n// update the cached header elements because we're in a new month or year\r\nfunction updateHeaderElements() {\r\n    var context = document.getElementById('ui-datepicker-div');\r\n    if (!context) {\r\n        return;\r\n    }\r\n\r\n//  $(context).find('table').first().attr('role', 'grid');\r\n\r\n    prev = $('.ui-datepicker-prev', context)[0];\r\n    next = $('.ui-datepicker-next', context)[0];\r\n\r\n    //make them click/focus - able\r\n    next.href = 'javascript:void(0)';\r\n    prev.href = 'javascript:void(0)';\r\n\r\n    next.setAttribute('role', 'button');\r\n    prev.setAttribute('role', 'button');\r\n    appendOffscreenMonthText(next);\r\n    appendOffscreenMonthText(prev);\r\n\r\n    $(next).on('click', handleNextClicks);\r\n    $(prev).on('click', handlePrevClicks);\r\n\r\n    // add month day year text\r\n    monthDayYearText();\r\n}\r\n\r\n\r\nfunction prepHighlightState() {\r\n    var highlight;\r\n    var cage = document.getElementById('ui-datepicker-div');\r\n    highlight = $('.ui-state-highlight', cage)[0] ||\r\n        $('.ui-state-default', cage)[0];\r\n    if (highlight && cage) {\r\n        setHighlightState(highlight, cage);\r\n    }\r\n}\r\n\r\n// Set the highlighted class to date elements, when focus is received\r\nfunction setHighlightState(newHighlight, container) {\r\n    var prevHighlight = getCurrentDate(container);\r\n    // remove the highlight state from previously\r\n    // highlighted date and add it to our newly active date\r\n    $(prevHighlight).removeClass('ui-state-highlight');\r\n    $(newHighlight).addClass('ui-state-highlight');\r\n}\r\n\r\n\r\n// grabs the current date based on the highlight class\r\nfunction getCurrentDate(container) {\r\n    var currentDate = $('.ui-state-highlight', container)[0];\r\n    return currentDate;\r\n}\r\n\r\n/**\r\n * Appends logical next/prev month text to the buttons\r\n * - ex: Next Month, January 2015\r\n *       Previous Month, November 2014\r\n */\r\nfunction appendOffscreenMonthText(button) {\r\n    var buttonText;\r\n    var isNext = $(button).hasClass('ui-datepicker-next');\r\n    var months = [\r\n        'january', 'february',\r\n        'march', 'april',\r\n        'may', 'june', 'july',\r\n        'august', 'september',\r\n        'october',\r\n        'november', 'december'\r\n    ];\r\n\r\n    var currentMonth = $('.ui-datepicker-title .ui-datepicker-month').text().toLowerCase();\r\n    var monthIndex = $.inArray(currentMonth.toLowerCase(), months);\r\n    var currentYear = $('.ui-datepicker-title .ui-datepicker-year').text().toLowerCase();\r\n    var adjacentIndex = (isNext) ? monthIndex + 1 : monthIndex - 1;\r\n\r\n    if (isNext && currentMonth === 'december') {\r\n        currentYear = parseInt(currentYear, 10) + 1;\r\n        adjacentIndex = 0;\r\n    } else if (!isNext && currentMonth === 'january') {\r\n        currentYear = parseInt(currentYear, 10) - 1;\r\n        adjacentIndex = months.length - 1;\r\n    }\r\n\r\n    buttonText = (isNext)\r\n        ? 'Next Month, ' + firstToCap(months[adjacentIndex]) + ' ' + currentYear\r\n        : 'Previous Month, ' + firstToCap(months[adjacentIndex]) + ' ' + currentYear;\r\n\r\n    $(button).find('.ui-icon').html(buttonText);\r\n\r\n}\r\n\r\n// Returns the string with the first letter capitalized\r\nfunction firstToCap(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvc2VhcmNoL2RhdGVwaWNrZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvc2VhcmNoL2RhdGVwaWNrZXIuanM/MjU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2RlcXVldW5pdmVyc2l0eS5jb20vbGlicmFyeS9hcmlhL2RhdGUtcGlja2Vycy9zZi1kYXRlLXBpY2tlclxyXG4vLyBjb25zb2xlLmxvZyhcInNlYXJjaC5qcyAtIGRhdGVwaWNrZXIuanNcIik7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNkYXRlcGlja2VyJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgc2hvd09uOiAnYnV0dG9uJyxcclxuICAgICAgICBidXR0b25JbWFnZTogJy9pbWFnZXMvY2FsZW5kYXItYmx1ZS5zdmcnLCAvLyBGaWxlIChhbmQgZmlsZSBwYXRoKSBmb3IgdGhlIGNhbGVuZGFyIGltYWdlXHJcbiAgICAgICAgYnV0dG9uSW1hZ2VPbmx5OiBmYWxzZSxcclxuICAgICAgICBidXR0b25UZXh0OiAnVmlzIGthbGVuZGVyJyxcclxuICAgICAgICBkYXlOYW1lc1Nob3J0OiBbIFwiTWFuZGFnXCIsIFwiVGlyc2RhZ1wiLCBcIk9uc2RhZ1wiLCBcIlRvcnNkYWdcIiwgXCJGcmVkYWdcIiwgXCJMw7hyZGFnXCIsIFwiU8O4bmRhZ1wiIF0sXHJcbiAgICAgICAgc2hvd0J1dHRvblBhbmVsOiB0cnVlLFxyXG4gICAgICAgIGNsb3NlVGV4dDogJ0x1a2snLFxyXG4gICAgICAgIG9uQ2xvc2U6IHJlbW92ZUFyaWFcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBhcmlhLWRlc2NyaWJlZGJ5IHRvIHRoZSBidXR0b24gcmVmZXJyaW5nIHRvIHRoZSBsYWJlbFxyXG4gICAgJCgnLnVpLWRhdGVwaWNrZXItdHJpZ2dlcicpLmF0dHIoJ2FyaWEtbGFiZWxsZWRieScsICdkYXRlcGlja2VyTGFiZWwnKTtcclxuXHJcbiAgICBkYXlUcmlwcGVyKCk7XHJcblxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGRheVRyaXBwZXIoKSB7XHJcbiAgICAkKCcudWktZGF0ZXBpY2tlci10cmlnZ2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9kYXkgPSAkKCcudWktZGF0ZXBpY2tlci10b2RheSBhJylbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRvZGF5KSB7XHJcbiAgICAgICAgICAgICAgICB0b2RheSA9ICQoJy51aS1zdGF0ZS1hY3RpdmUnKVswXSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICQoJy51aS1zdGF0ZS1kZWZhdWx0JylbMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBIaWRlIHRoZSBlbnRpcmUgcGFnZSAoZXhjZXB0IHRoZSBkYXRlIHBpY2tlcilcclxuICAgICAgICAgICAgLy8gZnJvbSBzY3JlZW4gcmVhZGVycyB0byBwcmV2ZW50IGRvY3VtZW50IG5hdmlnYXRpb25cclxuICAgICAgICAgICAgLy8gKGJ5IGhlYWRpbmdzLCBldGMuKSB3aGlsZSB0aGUgcG9wdXAgaXMgb3BlblxyXG4gICAgICAgICAgICAkKFwibWFpblwiKS5hdHRyKCdpZCcsJ2RwLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAkKFwiI2RwLWNvbnRhaW5lclwiKS5hdHRyKCdhcmlhLWhpZGRlbicsJ3RydWUnKTtcclxuICAgICAgICAgICAgJChcIiNza2lwbmF2XCIpLmF0dHIoJ2FyaWEtaGlkZGVuJywndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgLy8gSGlkZSB0aGUgXCJ0b2RheVwiIGJ1dHRvbiBiZWNhdXNlIGl0IGRvZXNuJ3QgZG8gd2hhdFxyXG4gICAgICAgICAgICAvLyB5b3UgdGhpbmsgaXQgc3VwcG9zZWQgdG8gZG9cclxuICAgICAgICAgICAgJChcIi51aS1kYXRlcGlja2VyLWN1cnJlbnRcIikuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgdG9kYXkuZm9jdXMoKTtcclxuICAgICAgICAgICAgZGF0ZVBpY2tIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdWktZGF0ZXBpY2tlci1kaXYgLnVpLWRhdGVwaWNrZXItY2xvc2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRhdGVQaWNrSGFuZGxlcigpIHtcclxuICAgIHZhciBhY3RpdmVEYXRlO1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGVwaWNrZXInKTtcclxuXHJcbiAgICBpZiAoIWNvbnRhaW5lciB8fCAhaW5wdXQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gJChjb250YWluZXIpLmZpbmQoJ3RhYmxlJykuZmlyc3QoKS5hdHRyKCdyb2xlJywgJ2dyaWQnKTtcclxuXHJcbiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2FwcGxpY2F0aW9uJyk7XHJcbiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0NhbGVuZGFyIHZpZXcgZGF0ZS1waWNrZXInKTtcclxuXHJcbiAgICAvLyB0aGUgdG9wIGNvbnRyb2xzOlxyXG4gICAgdmFyIHByZXYgPSAkKCcudWktZGF0ZXBpY2tlci1wcmV2JywgY29udGFpbmVyKVswXSxcclxuICAgICAgICBuZXh0ID0gJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcsIGNvbnRhaW5lcilbMF07XHJcblxyXG5cclxuLy8gVGhpcyBpcyB0aGUgbGluZSB0aGF0IG5lZWRzIHRvIGJlIGZpeGVkIGZvciB1c2Ugb24gcGFnZXMgd2l0aCBiYXNlIFVSTCBzZXQgaW4gaGVhZFxyXG4gICAgbmV4dC5ocmVmID0gJ2phdmFzY3JpcHQ6dm9pZCgwKSc7XHJcbiAgICBwcmV2LmhyZWYgPSAnamF2YXNjcmlwdDp2b2lkKDApJztcclxuXHJcbiAgICBuZXh0LnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcclxuICAgIG5leHQucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xyXG4gICAgcHJldi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XHJcbiAgICBwcmV2LnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcclxuXHJcbiAgICBhcHBlbmRPZmZzY3JlZW5Nb250aFRleHQobmV4dCk7XHJcbiAgICBhcHBlbmRPZmZzY3JlZW5Nb250aFRleHQocHJldik7XHJcblxyXG4gICAgLy8gZGVsZWdhdGlvbiB3b24ndCB3b3JrIGhlcmUgZm9yIHdoYXRldmVyIHJlYXNvbiwgc28gd2UgYXJlXHJcbiAgICAvLyBmb3JjZWQgdG8gYXR0YWNoIGluZGl2aWR1YWwgY2xpY2sgbGlzdGVuZXJzIHRvIHRoZSBwcmV2IC9cclxuICAgIC8vIG5leHQgbW9udGggYnV0dG9ucyBlYWNoIHRpbWUgdGhleSBhcmUgYWRkZWQgdG8gdGhlIERPTVxyXG4gICAgJChuZXh0KS5vbignY2xpY2snLCBoYW5kbGVOZXh0Q2xpY2tzKTtcclxuICAgICQocHJldikub24oJ2NsaWNrJywgaGFuZGxlUHJldkNsaWNrcyk7XHJcblxyXG4gICAgbW9udGhEYXlZZWFyVGV4dCgpO1xyXG5cclxuICAgICQoY29udGFpbmVyKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uIGNhbGVuZGFyS2V5Ym9hcmRMaXN0ZW5lcihrZXlWZW50KSB7XHJcbiAgICAgICAgdmFyIHdoaWNoID0ga2V5VmVudC53aGljaDtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0ga2V5VmVudC50YXJnZXQ7XHJcbiAgICAgICAgdmFyIGRhdGVDdXJyZW50ID0gZ2V0Q3VycmVudERhdGUoY29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgaWYgKCFkYXRlQ3VycmVudCkge1xyXG4gICAgICAgICAgICBkYXRlQ3VycmVudCA9ICQoJ2EudWktc3RhdGUtZGVmYXVsdCcpWzBdO1xyXG4gICAgICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShkYXRlQ3VycmVudCwgY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgyNyA9PT0gd2hpY2gpIHtcclxuICAgICAgICAgICAga2V5VmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNsb3NlQ2FsZW5kYXIoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdoaWNoID09PSA5ICYmIGtleVZlbnQuc2hpZnRLZXkpIHsgLy8gU0hJRlQgKyBUQUJcclxuICAgICAgICAgICAga2V5VmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLWNsb3NlJykpIHsgLy8gY2xvc2UgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAkKCcudWktZGF0ZXBpY2tlci1wcmV2JylbMF0uZm9jdXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLXN0YXRlLWRlZmF1bHQnKSkgeyAvLyBhIGRhdGUgbGlua1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItY2xvc2UnKVswXS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGFyZ2V0KS5oYXNDbGFzcygndWktZGF0ZXBpY2tlci1wcmV2JykpIHsgLy8gdGhlIHByZXYgbGlua1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcpWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLW5leHQnKSkgeyAvLyB0aGUgbmV4dCBsaW5rXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVEYXRlID0gJCgnLnVpLXN0YXRlLWhpZ2hsaWdodCcpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnVpLXN0YXRlLWFjdGl2ZScpWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZURhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVEYXRlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHdoaWNoID09PSA5KSB7IC8vIFRBQlxyXG4gICAgICAgICAgICBrZXlWZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICgkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLWRhdGVwaWNrZXItY2xvc2UnKSkgeyAvLyBjbG9zZSBidXR0b25cclxuICAgICAgICAgICAgICAgIGFjdGl2ZURhdGUgPSAkKCcudWktc3RhdGUtaGlnaGxpZ2h0JykgfHxcclxuICAgICAgICAgICAgICAgICAgICAkKCcudWktc3RhdGUtYWN0aXZlJylbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZURhdGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLXN0YXRlLWRlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcpWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLW5leHQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItcHJldicpWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLXByZXYnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItY2xvc2UnKVswXS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aGljaCA9PT0gMzcpIHsgLy8gTEVGVCBhcnJvdyBrZXlcclxuICAgICAgICAgICAgLy8gaWYgd2UncmUgb24gYSBkYXRlIGxpbmsuLi5cclxuICAgICAgICAgICAgaWYgKCEkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLWRhdGVwaWNrZXItY2xvc2UnKSAmJiAkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLXN0YXRlLWRlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICAgICAga2V5VmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEYXkodGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAod2hpY2ggPT09IDM5KSB7IC8vIFJJR0hUIGFycm93IGtleVxyXG4gICAgICAgICAgICAvLyBpZiB3ZSdyZSBvbiBhIGRhdGUgbGluay4uLlxyXG4gICAgICAgICAgICBpZiAoISQodGFyZ2V0KS5oYXNDbGFzcygndWktZGF0ZXBpY2tlci1jbG9zZScpICYmICQodGFyZ2V0KS5oYXNDbGFzcygndWktc3RhdGUtZGVmYXVsdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBrZXlWZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0RGF5KHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHdoaWNoID09PSAzOCkgeyAvLyBVUCBhcnJvdyBrZXlcclxuICAgICAgICAgICAgaWYgKCEkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLWRhdGVwaWNrZXItY2xvc2UnKSAmJiAkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLXN0YXRlLWRlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICAgICAga2V5VmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdXBIYW5kbGVyKHRhcmdldCwgY29udGFpbmVyLCBwcmV2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAod2hpY2ggPT09IDQwKSB7IC8vIERPV04gYXJyb3cga2V5XHJcbiAgICAgICAgICAgIGlmICghJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLWNsb3NlJykgJiYgJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1zdGF0ZS1kZWZhdWx0JykpIHtcclxuICAgICAgICAgICAgICAgIGtleVZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGRvd25IYW5kbGVyKHRhcmdldCwgY29udGFpbmVyLCBuZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAod2hpY2ggPT09IDEzKSB7IC8vIEVOVEVSXHJcbiAgICAgICAgICAgIGlmICgkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLXN0YXRlLWRlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VDYWxlbmRhcigpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRhcmdldCkuaGFzQ2xhc3MoJ3VpLWRhdGVwaWNrZXItcHJldicpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVQcmV2Q2xpY2tzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLW5leHQnKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlTmV4dENsaWNrcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgzMiA9PT0gd2hpY2gpIHtcclxuICAgICAgICAgICAgaWYgKCQodGFyZ2V0KS5oYXNDbGFzcygndWktZGF0ZXBpY2tlci1wcmV2JykgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKCd1aS1kYXRlcGlja2VyLW5leHQnKSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKDMzID09PSB3aGljaCkgeyAvLyBQQUdFIFVQXHJcbiAgICAgICAgICAgIG1vdmVPbmVNb250aCh0YXJnZXQsICdwcmV2Jyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgzNCA9PT0gd2hpY2gpIHsgLy8gUEFHRSBET1dOXHJcbiAgICAgICAgICAgIG1vdmVPbmVNb250aCh0YXJnZXQsICduZXh0Jyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgzNiA9PT0gd2hpY2gpIHsgLy8gSE9NRVxyXG4gICAgICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gJCh0YXJnZXQpLmNsb3Nlc3QoJ3Rib2R5JykuZmluZCgnLnVpLXN0YXRlLWRlZmF1bHQnKVswXTtcclxuICAgICAgICAgICAgaWYgKGZpcnN0T2ZNb250aCkge1xyXG4gICAgICAgICAgICAgICAgZmlyc3RPZk1vbnRoLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShmaXJzdE9mTW9udGgsICQoJyN1aS1kYXRlcGlja2VyLWRpdicpWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoMzUgPT09IHdoaWNoKSB7IC8vIEVORFxyXG4gICAgICAgICAgICB2YXIgJGRheXNPZk1vbnRoID0gJCh0YXJnZXQpLmNsb3Nlc3QoJ3Rib2R5JykuZmluZCgnLnVpLXN0YXRlLWRlZmF1bHQnKTtcclxuICAgICAgICAgICAgdmFyIGxhc3REYXkgPSAkZGF5c09mTW9udGhbJGRheXNPZk1vbnRoLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobGFzdERheSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdERheS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobGFzdERheSwgJCgnI3VpLWRhdGVwaWNrZXItZGl2JylbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIudWktZGF0ZXBpY2tlci1jdXJyZW50XCIpLmhpZGUoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZUNhbGVuZGFyKCkge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9ICQoJyN1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgJChjb250YWluZXIpLm9mZigna2V5ZG93bicpO1xyXG4gICAgdmFyIGlucHV0ID0gJCgnI2RhdGVwaWNrZXInKVswXTtcclxuICAgICQoaW5wdXQpLmRhdGVwaWNrZXIoJ2hpZGUnKTtcclxuXHJcbiAgICBpbnB1dC5mb2N1cygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVBcmlhKCkge1xyXG4gICAgLy8gbWFrZSB0aGUgcmVzdCBvZiB0aGUgcGFnZSBhY2Nlc3NpYmxlIGFnYWluOlxyXG4gICAgJChcIiNkcC1jb250YWluZXJcIikucmVtb3ZlQXR0cignYXJpYS1oaWRkZW4nKTtcclxuICAgICQoXCIjc2tpcG5hdlwiKS5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbicpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAvLyAvL1xyXG4vLyBVVElMSVRZLUxJS0UgVEhJTkdTIC8vIC8vIC8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gLy8gLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAvL1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZ1bmN0aW9uIGlzT2RkKG51bSkge1xyXG4gICAgcmV0dXJuIG51bSAlIDI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdmVPbmVNb250aChjdXJyZW50RGF0ZSwgZGlyKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gKGRpciA9PT0gJ25leHQnKVxyXG4gICAgICAgID8gJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcpWzBdXHJcbiAgICAgICAgOiAkKCcudWktZGF0ZXBpY2tlci1wcmV2JylbMF07XHJcblxyXG4gICAgaWYgKCFidXR0b24pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIEVOQUJMRURfU0VMRUNUT1IgPSAnI3VpLWRhdGVwaWNrZXItZGl2IHRib2R5IHRkOm5vdCgudWktc3RhdGUtZGlzYWJsZWQpJztcclxuICAgIHZhciAkY3VycmVudENlbGxzID0gJChFTkFCTEVEX1NFTEVDVE9SKTtcclxuICAgIHZhciBjdXJyZW50SWR4ID0gJC5pbkFycmF5KGN1cnJlbnREYXRlLnBhcmVudE5vZGUsICRjdXJyZW50Q2VsbHMpO1xyXG5cclxuICAgIGJ1dHRvbi5jbGljaygpO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXBkYXRlSGVhZGVyRWxlbWVudHMoKTtcclxuXHJcbiAgICAgICAgdmFyICRuZXdDZWxscyA9ICQoRU5BQkxFRF9TRUxFQ1RPUik7XHJcbiAgICAgICAgdmFyIG5ld1RkID0gJG5ld0NlbGxzW2N1cnJlbnRJZHhdO1xyXG4gICAgICAgIHZhciBuZXdBbmNob3IgPSBuZXdUZCAmJiAkKG5ld1RkKS5maW5kKCdhJylbMF07XHJcblxyXG4gICAgICAgIHdoaWxlICghbmV3QW5jaG9yKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJZHgtLTtcclxuICAgICAgICAgICAgbmV3VGQgPSAkbmV3Q2VsbHNbY3VycmVudElkeF07XHJcbiAgICAgICAgICAgIG5ld0FuY2hvciA9IG5ld1RkICYmICQobmV3VGQpLmZpbmQoJ2EnKVswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldEhpZ2hsaWdodFN0YXRlKG5ld0FuY2hvciwgJCgnI3VpLWRhdGVwaWNrZXItZGl2JylbMF0pO1xyXG4gICAgICAgIG5ld0FuY2hvci5mb2N1cygpO1xyXG5cclxuICAgIH0sIDApO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTmV4dENsaWNrcygpIHtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHVwZGF0ZUhlYWRlckVsZW1lbnRzKCk7XHJcbiAgICAgICAgcHJlcEhpZ2hsaWdodFN0YXRlKCk7XHJcbiAgICAgICAgJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcpLmZvY3VzKCk7XHJcbiAgICAgICAgJChcIi51aS1kYXRlcGlja2VyLWN1cnJlbnRcIikuaGlkZSgpO1xyXG4gICAgfSwgMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByZXZDbGlja3MoKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1cGRhdGVIZWFkZXJFbGVtZW50cygpO1xyXG4gICAgICAgIHByZXBIaWdobGlnaHRTdGF0ZSgpO1xyXG4gICAgICAgICQoJy51aS1kYXRlcGlja2VyLXByZXYnKS5mb2N1cygpO1xyXG4gICAgICAgICQoXCIudWktZGF0ZXBpY2tlci1jdXJyZW50XCIpLmhpZGUoKTtcclxuICAgIH0sIDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcmV2aW91c0RheShkYXRlTGluaykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgaWYgKCFkYXRlTGluaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0ZCA9ICQoZGF0ZUxpbmspLmNsb3Nlc3QoJ3RkJyk7XHJcbiAgICBpZiAoIXRkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBwcmV2VGQgPSAkKHRkKS5wcmV2KCksXHJcbiAgICAgICAgcHJldkRhdGVMaW5rID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0JywgcHJldlRkKVswXTtcclxuXHJcbiAgICBpZiAocHJldlRkICYmIHByZXZEYXRlTGluaykge1xyXG4gICAgICAgIHNldEhpZ2hsaWdodFN0YXRlKHByZXZEYXRlTGluaywgY29udGFpbmVyKTtcclxuICAgICAgICBwcmV2RGF0ZUxpbmsuZm9jdXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGFuZGxlUHJldmlvdXMoZGF0ZUxpbmspO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJldmlvdXModGFyZ2V0KSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VpLWRhdGVwaWNrZXItZGl2Jyk7XHJcbiAgICBpZiAoIXRhcmdldCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBjdXJyZW50Um93ID0gJCh0YXJnZXQpLmNsb3Nlc3QoJ3RyJyk7XHJcbiAgICBpZiAoIWN1cnJlbnRSb3cpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgcHJldmlvdXNSb3cgPSAkKGN1cnJlbnRSb3cpLnByZXYoKTtcclxuXHJcbiAgICBpZiAoIXByZXZpb3VzUm93IHx8IHByZXZpb3VzUm93Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIC8vIHRoZXJlIGlzIG5vdCBwcmV2aW91cyByb3csIHNvIHdlIGdvIHRvIHByZXZpb3VzIG1vbnRoLi4uXHJcbiAgICAgICAgcHJldmlvdXNNb250aCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgcHJldlJvd0RhdGVzID0gJCgndGQgYS51aS1zdGF0ZS1kZWZhdWx0JywgcHJldmlvdXNSb3cpO1xyXG4gICAgICAgIHZhciBwcmV2Um93RGF0ZSA9IHByZXZSb3dEYXRlc1twcmV2Um93RGF0ZXMubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgIGlmIChwcmV2Um93RGF0ZSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNldEhpZ2hsaWdodFN0YXRlKHByZXZSb3dEYXRlLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgcHJldlJvd0RhdGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwcmV2aW91c01vbnRoKCkge1xyXG4gICAgdmFyIHByZXZMaW5rID0gJCgnLnVpLWRhdGVwaWNrZXItcHJldicpWzBdO1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgcHJldkxpbmsuY2xpY2soKTtcclxuICAgIC8vIGZvY3VzIGxhc3QgZGF5IG9mIG5ldyBtb250aFxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRycyA9ICQoJ3RyJywgY29udGFpbmVyKSxcclxuICAgICAgICAgICAgbGFzdFJvd1RkTGlua3MgPSAkKCd0ZCBhLnVpLXN0YXRlLWRlZmF1bHQnLCB0cnNbdHJzLmxlbmd0aCAtIDFdKSxcclxuICAgICAgICAgICAgbGFzdERhdGUgPSBsYXN0Um93VGRMaW5rc1tsYXN0Um93VGRMaW5rcy5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRpbmcgdGhlIGNhY2hlZCBoZWFkZXIgZWxlbWVudHNcclxuICAgICAgICB1cGRhdGVIZWFkZXJFbGVtZW50cygpO1xyXG5cclxuICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShsYXN0RGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICBsYXN0RGF0ZS5mb2N1cygpO1xyXG5cclxuICAgIH0sIDApO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLyBORVhUIC8vLy8vLy8vLy8vLy8vLy8vXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHJpZ2h0IGFycm93IGtleSBuYXZpZ2F0aW9uXHJcbiAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBkYXRlTGluayBUaGUgdGFyZ2V0IG9mIHRoZSBrZXlib2FyZCBldmVudFxyXG4gKi9cclxuZnVuY3Rpb24gbmV4dERheShkYXRlTGluaykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgaWYgKCFkYXRlTGluaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0ZCA9ICQoZGF0ZUxpbmspLmNsb3Nlc3QoJ3RkJyk7XHJcbiAgICBpZiAoIXRkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIG5leHRUZCA9ICQodGQpLm5leHQoKSxcclxuICAgICAgICBuZXh0RGF0ZUxpbmsgPSAkKCdhLnVpLXN0YXRlLWRlZmF1bHQnLCBuZXh0VGQpWzBdO1xyXG5cclxuICAgIGlmIChuZXh0VGQgJiYgbmV4dERhdGVMaW5rKSB7XHJcbiAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobmV4dERhdGVMaW5rLCBjb250YWluZXIpO1xyXG4gICAgICAgIG5leHREYXRlTGluay5mb2N1cygpOyAvLyB0aGUgbmV4dCBkYXkgKHNhbWUgcm93KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBoYW5kbGVOZXh0KGRhdGVMaW5rKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTmV4dCh0YXJnZXQpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWktZGF0ZXBpY2tlci1kaXYnKTtcclxuICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIGN1cnJlbnRSb3cgPSAkKHRhcmdldCkuY2xvc2VzdCgndHInKSxcclxuICAgICAgICBuZXh0Um93ID0gJChjdXJyZW50Um93KS5uZXh0KCk7XHJcblxyXG4gICAgaWYgKCFuZXh0Um93IHx8IG5leHRSb3cubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbmV4dE1vbnRoKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBuZXh0Um93Rmlyc3REYXRlID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0JywgbmV4dFJvdylbMF07XHJcbiAgICAgICAgaWYgKG5leHRSb3dGaXJzdERhdGUpIHtcclxuICAgICAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobmV4dFJvd0ZpcnN0RGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgbmV4dFJvd0ZpcnN0RGF0ZS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbmV4dE1vbnRoKCkge1xyXG4gICAgbmV4dE1vbiA9ICQoJy51aS1kYXRlcGlja2VyLW5leHQnKVswXTtcclxuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWktZGF0ZXBpY2tlci1kaXYnKTtcclxuICAgIG5leHRNb24uY2xpY2soKTtcclxuICAgIC8vIGZvY3VzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIG5ldyBtb250aFxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdXBkYXRpbmcgdGhlIGNhY2hlZCBoZWFkZXIgZWxlbWVudHNcclxuICAgICAgICB1cGRhdGVIZWFkZXJFbGVtZW50cygpO1xyXG5cclxuICAgICAgICB2YXIgZmlyc3REYXRlID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0JywgY29udGFpbmVyKVswXTtcclxuICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShmaXJzdERhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgZmlyc3REYXRlLmZvY3VzKCk7XHJcbiAgICB9LCAwKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8gVVAgLy8vLy8vLy8vLy9cclxuLyoqXHJcbiAqIEhhbmRsZSB0aGUgdXAgYXJyb3cgbmF2aWdhdGlvbiB0aHJvdWdoIGRhdGVzXHJcbiAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSB0YXJnZXQgICBUaGUgdGFyZ2V0IG9mIHRoZSBrZXlib2FyZCBldmVudCAoZGF5KVxyXG4gKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gY29udCAgICAgVGhlIGNhbGVuZGFyIGNvbnRhaW5lclxyXG4gKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gcHJldkxpbmsgTGluayB0byBuYXZpZ2F0ZSB0byBwcmV2aW91cyBtb250aFxyXG4gKi9cclxuZnVuY3Rpb24gdXBIYW5kbGVyKHRhcmdldCwgY29udCwgcHJldkxpbmspIHtcclxuICAgIHByZXZMaW5rID0gJCgnLnVpLWRhdGVwaWNrZXItcHJldicpWzBdO1xyXG4gICAgdmFyIHJvd0NvbnRleHQgPSAkKHRhcmdldCkuY2xvc2VzdCgndHInKTtcclxuICAgIGlmICghcm93Q29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciByb3dUZHMgPSAkKCd0ZCcsIHJvd0NvbnRleHQpLFxyXG4gICAgICAgIHJvd0xpbmtzID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0Jywgcm93Q29udGV4dCksXHJcbiAgICAgICAgdGFyZ2V0SW5kZXggPSAkLmluQXJyYXkodGFyZ2V0LCByb3dMaW5rcyksXHJcbiAgICAgICAgcHJldlJvdyA9ICQocm93Q29udGV4dCkucHJldigpLFxyXG4gICAgICAgIHByZXZSb3dUZHMgPSAkKCd0ZCcsIHByZXZSb3cpLFxyXG4gICAgICAgIHBhcmFsbGVsID0gcHJldlJvd1Rkc1t0YXJnZXRJbmRleF0sXHJcbiAgICAgICAgbGlua0NoZWNrID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0JywgcGFyYWxsZWwpWzBdO1xyXG5cclxuICAgIGlmIChwcmV2Um93ICYmIHBhcmFsbGVsICYmIGxpbmtDaGVjaykge1xyXG4gICAgICAgIC8vIHRoZXJlIGlzIGEgcHJldmlvdXMgcm93LCBhIHRkIGF0IHRoZSBzYW1lIGluZGV4XHJcbiAgICAgICAgLy8gb2YgdGhlIHRhcmdldCBBTkQgdGhlcmVzIGEgbGluayBpbiB0aGF0IHRkXHJcbiAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobGlua0NoZWNrLCBjb250KTtcclxuICAgICAgICBsaW5rQ2hlY2suZm9jdXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gd2UncmUgZWl0aGVyIG9uIHRoZSBmaXJzdCByb3cgb2YgYSBtb250aCwgb3Igd2UncmUgb24gdGhlXHJcbiAgICAgICAgLy8gc2Vjb25kIGFuZCB0aGVyZSBpcyBub3QgYSBkYXRlIGxpbmsgZGlyZWN0bHkgYWJvdmUgdGhlIHRhcmdldFxyXG4gICAgICAgIHByZXZMaW5rLmNsaWNrKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0aW5nIHRoZSBjYWNoZWQgaGVhZGVyIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIHVwZGF0ZUhlYWRlckVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdSb3dzID0gJCgndHInLCBjb250KSxcclxuICAgICAgICAgICAgICAgIGxhc3RSb3cgPSBuZXdSb3dzW25ld1Jvd3MubGVuZ3RoIC0gMV0sXHJcbiAgICAgICAgICAgICAgICBsYXN0Um93VGRzID0gJCgndGQnLCBsYXN0Um93KSxcclxuICAgICAgICAgICAgICAgIHRkUGFyYWxsZWxJbmRleCA9ICQuaW5BcnJheSh0YXJnZXQucGFyZW50Tm9kZSwgcm93VGRzKSxcclxuICAgICAgICAgICAgICAgIG5ld1BhcmFsbGVsID0gbGFzdFJvd1Rkc1t0ZFBhcmFsbGVsSW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgbmV3Q2hlY2sgPSAkKCdhLnVpLXN0YXRlLWRlZmF1bHQnLCBuZXdQYXJhbGxlbClbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAobGFzdFJvdyAmJiBuZXdQYXJhbGxlbCAmJiBuZXdDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobmV3Q2hlY2ssIGNvbnQpO1xyXG4gICAgICAgICAgICAgICAgbmV3Q2hlY2suZm9jdXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoZXJlcyBubyBkYXRlIGxpbmsgb24gdGhlIGxhc3Qgd2VlayAocm93KSBvZiB0aGUgbmV3IG1vbnRoXHJcbiAgICAgICAgICAgICAgICAvLyBtZWFuaW5nIGl0cyBhbiBlbXB0eSBjZWxsLCBzbyB3ZSdsbCB0cnkgdGhlIDJuZCB0byBsYXN0IHdlZWtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRMYXN0Um93ID0gbmV3Um93c1tuZXdSb3dzLmxlbmd0aCAtIDJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZFRkcyA9ICQoJ3RkJywgc2Vjb25kTGFzdFJvdyksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VGQgPSBzZWNvbmRUZHNbdGRQYXJhbGxlbEluZGV4XSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rQ2hlY2sgPSAkKCdhLnVpLXN0YXRlLWRlZmF1bHQnLCB0YXJnZXRUZClbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmtDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEhpZ2hsaWdodFN0YXRlKGxpbmtDaGVjaywgY29udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua0NoZWNrLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8gRE9XTiAvLy8vLy8vLy8vLy8vLy8vXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGRvd24gYXJyb3cgbmF2aWdhdGlvbiB0aHJvdWdoIGRhdGVzIGluIGNhbGVuZGFyXHJcbiAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSB0YXJnZXQgICBUaGUgdGFyZ2V0IG9mIHRoZSBrZXlib2FyZCBldmVudCAoZGF5KVxyXG4gKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gY29udCAgICAgVGhlIGNhbGVuZGFyIGNvbnRhaW5lclxyXG4gKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gbmV4dExpbmsgTGluayB0byBuYXZpZ2F0ZSB0byBuZXh0IG1vbnRoXHJcbiAqL1xyXG5mdW5jdGlvbiBkb3duSGFuZGxlcih0YXJnZXQsIGNvbnQsIG5leHRMaW5rKSB7XHJcbiAgICBuZXh0TGluayA9ICQoJy51aS1kYXRlcGlja2VyLW5leHQnKVswXTtcclxuICAgIHZhciB0YXJnZXRSb3cgPSAkKHRhcmdldCkuY2xvc2VzdCgndHInKTtcclxuICAgIGlmICghdGFyZ2V0Um93KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHRhcmdldENlbGxzID0gJCgndGQnLCB0YXJnZXRSb3cpLFxyXG4gICAgICAgIGNlbGxJbmRleCA9ICQuaW5BcnJheSh0YXJnZXQucGFyZW50Tm9kZSwgdGFyZ2V0Q2VsbHMpLCAvLyB0aGUgdGQgKHBhcmVudCBvZiB0YXJnZXQpIGluZGV4XHJcbiAgICAgICAgbmV4dFJvdyA9ICQodGFyZ2V0Um93KS5uZXh0KCksXHJcbiAgICAgICAgbmV4dFJvd0NlbGxzID0gJCgndGQnLCBuZXh0Um93KSxcclxuICAgICAgICBuZXh0V2Vla1RkID0gbmV4dFJvd0NlbGxzW2NlbGxJbmRleF0sXHJcbiAgICAgICAgbmV4dFdlZWtDaGVjayA9ICQoJ2EudWktc3RhdGUtZGVmYXVsdCcsIG5leHRXZWVrVGQpWzBdO1xyXG5cclxuICAgIGlmIChuZXh0Um93ICYmIG5leHRXZWVrVGQgJiYgbmV4dFdlZWtDaGVjaykge1xyXG4gICAgICAgIC8vIHRoZXJlcyBhIG5leHQgcm93LCBhIFREIGF0IHRoZSBzYW1lIGluZGV4IG9mIGB0YXJnZXRgLFxyXG4gICAgICAgIC8vIGFuZCB0aGVyZXMgYW4gYW5jaG9yIHdpdGhpbiB0aGF0IHRkXHJcbiAgICAgICAgc2V0SGlnaGxpZ2h0U3RhdGUobmV4dFdlZWtDaGVjaywgY29udCk7XHJcbiAgICAgICAgbmV4dFdlZWtDaGVjay5mb2N1cygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBuZXh0TGluay5jbGljaygpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gdXBkYXRpbmcgdGhlIGNhY2hlZCBoZWFkZXIgZWxlbWVudHNcclxuICAgICAgICAgICAgdXBkYXRlSGVhZGVyRWxlbWVudHMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXh0TW9udGhUcnMgPSAkKCd0Ym9keSB0cicsIGNvbnQpLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RUZHMgPSAkKCd0ZCcsIG5leHRNb250aFRyc1swXSksXHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhcmFsbGVsID0gZmlyc3RUZHNbY2VsbEluZGV4XSxcclxuICAgICAgICAgICAgICAgIGZpcnN0Q2hlY2sgPSAkKCdhLnVpLXN0YXRlLWRlZmF1bHQnLCBmaXJzdFBhcmFsbGVsKVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdFBhcmFsbGVsICYmIGZpcnN0Q2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHNldEhpZ2hsaWdodFN0YXRlKGZpcnN0Q2hlY2ssIGNvbnQpO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RDaGVjay5mb2N1cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0cyB0cnkgdGhlIHNlY29uZCByb3cgYi9jIHdlIGRpZG50IGZpbmQgYVxyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZSBsaW5rIGluIHRoZSBmaXJzdCByb3cgYXQgdGhlIHRhcmdldCdzIGluZGV4XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Vjb25kUm93ID0gbmV4dE1vbnRoVHJzWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZFRkcyA9ICQoJ3RkJywgc2Vjb25kUm93KSxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmRSb3dUZCA9IHNlY29uZFRkc1tjZWxsSW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZENoZWNrID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0Jywgc2Vjb25kUm93VGQpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzZWNvbmRSb3cgJiYgc2Vjb25kQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShzZWNvbmRDaGVjaywgY29udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kQ2hlY2suZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gb25DYWxlbmRhckhpZGUoKSB7XHJcbiAgICBjbG9zZUNhbGVuZGFyKCk7XHJcbn1cclxuXHJcbi8vIGFkZCBhbiBhcmlhLWxhYmVsIHRvIHRoZSBkYXRlIGxpbmsgaW5kaWNhdGluZyB0aGUgY3VycmVudGx5IGZvY3VzZWQgZGF0ZVxyXG4vLyAoZm9ybWF0dGVkIGlkZW50aWNhbGx5IHRvIHRoZSByZXF1aXJlZCBmb3JtYXQ6IG1tL2RkL3l5eXkpXHJcbmZ1bmN0aW9uIG1vbnRoRGF5WWVhclRleHQoKSB7XHJcbiAgICB2YXIgY2xlYW5VcHMgPSAkKCcuYW1hemUtZGF0ZScpO1xyXG5cclxuICAgICQoY2xlYW5VcHMpLmVhY2goZnVuY3Rpb24gKGNsZWFuKSB7XHJcbiAgICAgICAgLy8gZWFjaChjbGVhblVwcywgZnVuY3Rpb24gKGNsZWFuKSB7XHJcbiAgICAgICAgY2xlYW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbGVhbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZGF0ZVBpY2tEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWktZGF0ZXBpY2tlci1kaXYnKTtcclxuICAgIC8vIGluIGNhc2Ugd2UgZmluZCBubyBkYXRlcGljayBkaXZcclxuICAgIGlmICghZGF0ZVBpY2tEaXYpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGVzID0gJCgnYS51aS1zdGF0ZS1kZWZhdWx0JywgZGF0ZVBpY2tEaXYpO1xyXG4gICAgJChkYXRlcykuYXR0cigncm9sZScsICdidXR0b24nKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDMyKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xpY2soKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKGRhdGVzKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZGF0ZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50Um93ID0gJChkYXRlKS5jbG9zZXN0KCd0cicpLFxyXG4gICAgICAgICAgICBjdXJyZW50VGRzID0gJCgndGQnLCBjdXJyZW50Um93KSxcclxuICAgICAgICAgICAgY3VycmVudEluZGV4ID0gJC5pbkFycmF5KGRhdGUucGFyZW50Tm9kZSwgY3VycmVudFRkcyksXHJcbiAgICAgICAgICAgIGhlYWRUaHMgPSAkKCd0aGVhZCB0ciB0aCcsIGRhdGVQaWNrRGl2KSxcclxuICAgICAgICAgICAgZGF5SW5kZXggPSBoZWFkVGhzW2N1cnJlbnRJbmRleF0sXHJcbiAgICAgICAgICAgIGRheVNwYW4gPSAkKCdzcGFuJywgZGF5SW5kZXgpWzBdLFxyXG4gICAgICAgICAgICBtb250aE5hbWUgPSAkKCcudWktZGF0ZXBpY2tlci1tb250aCcsIGRhdGVQaWNrRGl2KVswXS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgIHllYXIgPSAkKCcudWktZGF0ZXBpY2tlci15ZWFyJywgZGF0ZVBpY2tEaXYpWzBdLmlubmVySFRNTCxcclxuICAgICAgICAgICAgbnVtYmVyID0gZGF0ZS5pbm5lckhUTUw7XHJcblxyXG4gICAgICAgIGlmICghZGF5U3BhbiB8fCAhbW9udGhOYW1lIHx8ICFudW1iZXIgfHwgIXllYXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQVQgUmVhZHM6IHttb250aH0ge2RhdGV9IHt5ZWFyfSB7ZGF5fVxyXG4gICAgICAgIC8vIFwiRGVjZW1iZXIgMTggMjAxNCBUaHVyc2RheVwiXHJcbiAgICAgICAgdmFyIGRhdGVUZXh0ID0gZGF0ZS5pbm5lckhUTUwgKyAnICcgKyBtb250aE5hbWUgKyAnICcgKyB5ZWFyICsgJyAnICsgZGF5U3Bhbi50aXRsZTtcclxuICAgICAgICAvLyBBVCBSZWFkczoge2RhdGUobnVtYmVyKX0ge25hbWUgb2YgZGF5fSB7bmFtZSBvZiBtb250aH0ge3llYXIobnVtYmVyKX1cclxuICAgICAgICAvLyB2YXIgZGF0ZVRleHQgPSBkYXRlLmlubmVySFRNTCArICcgJyArIGRheVNwYW4udGl0bGUgKyAnICcgKyBtb250aE5hbWUgKyAnICcgKyB5ZWFyO1xyXG4gICAgICAgIC8vIGFkZCBhbiBhcmlhLWxhYmVsIHRvIHRoZSBkYXRlIGxpbmsgcmVhZGluZyBvdXQgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGRhdGVcclxuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGRhdGVUZXh0KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIHVwZGF0ZSB0aGUgY2FjaGVkIGhlYWRlciBlbGVtZW50cyBiZWNhdXNlIHdlJ3JlIGluIGEgbmV3IG1vbnRoIG9yIHllYXJcclxuZnVuY3Rpb24gdXBkYXRlSGVhZGVyRWxlbWVudHMoKSB7XHJcbiAgICB2YXIgY29udGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1aS1kYXRlcGlja2VyLWRpdicpO1xyXG4gICAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuLy8gICQoY29udGV4dCkuZmluZCgndGFibGUnKS5maXJzdCgpLmF0dHIoJ3JvbGUnLCAnZ3JpZCcpO1xyXG5cclxuICAgIHByZXYgPSAkKCcudWktZGF0ZXBpY2tlci1wcmV2JywgY29udGV4dClbMF07XHJcbiAgICBuZXh0ID0gJCgnLnVpLWRhdGVwaWNrZXItbmV4dCcsIGNvbnRleHQpWzBdO1xyXG5cclxuICAgIC8vbWFrZSB0aGVtIGNsaWNrL2ZvY3VzIC0gYWJsZVxyXG4gICAgbmV4dC5ocmVmID0gJ2phdmFzY3JpcHQ6dm9pZCgwKSc7XHJcbiAgICBwcmV2LmhyZWYgPSAnamF2YXNjcmlwdDp2b2lkKDApJztcclxuXHJcbiAgICBuZXh0LnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcclxuICAgIHByZXYuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xyXG4gICAgYXBwZW5kT2Zmc2NyZWVuTW9udGhUZXh0KG5leHQpO1xyXG4gICAgYXBwZW5kT2Zmc2NyZWVuTW9udGhUZXh0KHByZXYpO1xyXG5cclxuICAgICQobmV4dCkub24oJ2NsaWNrJywgaGFuZGxlTmV4dENsaWNrcyk7XHJcbiAgICAkKHByZXYpLm9uKCdjbGljaycsIGhhbmRsZVByZXZDbGlja3MpO1xyXG5cclxuICAgIC8vIGFkZCBtb250aCBkYXkgeWVhciB0ZXh0XHJcbiAgICBtb250aERheVllYXJUZXh0KCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBwcmVwSGlnaGxpZ2h0U3RhdGUoKSB7XHJcbiAgICB2YXIgaGlnaGxpZ2h0O1xyXG4gICAgdmFyIGNhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWktZGF0ZXBpY2tlci1kaXYnKTtcclxuICAgIGhpZ2hsaWdodCA9ICQoJy51aS1zdGF0ZS1oaWdobGlnaHQnLCBjYWdlKVswXSB8fFxyXG4gICAgICAgICQoJy51aS1zdGF0ZS1kZWZhdWx0JywgY2FnZSlbMF07XHJcbiAgICBpZiAoaGlnaGxpZ2h0ICYmIGNhZ2UpIHtcclxuICAgICAgICBzZXRIaWdobGlnaHRTdGF0ZShoaWdobGlnaHQsIGNhZ2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBTZXQgdGhlIGhpZ2hsaWdodGVkIGNsYXNzIHRvIGRhdGUgZWxlbWVudHMsIHdoZW4gZm9jdXMgaXMgcmVjZWl2ZWRcclxuZnVuY3Rpb24gc2V0SGlnaGxpZ2h0U3RhdGUobmV3SGlnaGxpZ2h0LCBjb250YWluZXIpIHtcclxuICAgIHZhciBwcmV2SGlnaGxpZ2h0ID0gZ2V0Q3VycmVudERhdGUoY29udGFpbmVyKTtcclxuICAgIC8vIHJlbW92ZSB0aGUgaGlnaGxpZ2h0IHN0YXRlIGZyb20gcHJldmlvdXNseVxyXG4gICAgLy8gaGlnaGxpZ2h0ZWQgZGF0ZSBhbmQgYWRkIGl0IHRvIG91ciBuZXdseSBhY3RpdmUgZGF0ZVxyXG4gICAgJChwcmV2SGlnaGxpZ2h0KS5yZW1vdmVDbGFzcygndWktc3RhdGUtaGlnaGxpZ2h0Jyk7XHJcbiAgICAkKG5ld0hpZ2hsaWdodCkuYWRkQ2xhc3MoJ3VpLXN0YXRlLWhpZ2hsaWdodCcpO1xyXG59XHJcblxyXG5cclxuLy8gZ3JhYnMgdGhlIGN1cnJlbnQgZGF0ZSBiYXNlZCBvbiB0aGUgaGlnaGxpZ2h0IGNsYXNzXHJcbmZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKGNvbnRhaW5lcikge1xyXG4gICAgdmFyIGN1cnJlbnREYXRlID0gJCgnLnVpLXN0YXRlLWhpZ2hsaWdodCcsIGNvbnRhaW5lcilbMF07XHJcbiAgICByZXR1cm4gY3VycmVudERhdGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBlbmRzIGxvZ2ljYWwgbmV4dC9wcmV2IG1vbnRoIHRleHQgdG8gdGhlIGJ1dHRvbnNcclxuICogLSBleDogTmV4dCBNb250aCwgSmFudWFyeSAyMDE1XHJcbiAqICAgICAgIFByZXZpb3VzIE1vbnRoLCBOb3ZlbWJlciAyMDE0XHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBlbmRPZmZzY3JlZW5Nb250aFRleHQoYnV0dG9uKSB7XHJcbiAgICB2YXIgYnV0dG9uVGV4dDtcclxuICAgIHZhciBpc05leHQgPSAkKGJ1dHRvbikuaGFzQ2xhc3MoJ3VpLWRhdGVwaWNrZXItbmV4dCcpO1xyXG4gICAgdmFyIG1vbnRocyA9IFtcclxuICAgICAgICAnamFudWFyeScsICdmZWJydWFyeScsXHJcbiAgICAgICAgJ21hcmNoJywgJ2FwcmlsJyxcclxuICAgICAgICAnbWF5JywgJ2p1bmUnLCAnanVseScsXHJcbiAgICAgICAgJ2F1Z3VzdCcsICdzZXB0ZW1iZXInLFxyXG4gICAgICAgICdvY3RvYmVyJyxcclxuICAgICAgICAnbm92ZW1iZXInLCAnZGVjZW1iZXInXHJcbiAgICBdO1xyXG5cclxuICAgIHZhciBjdXJyZW50TW9udGggPSAkKCcudWktZGF0ZXBpY2tlci10aXRsZSAudWktZGF0ZXBpY2tlci1tb250aCcpLnRleHQoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdmFyIG1vbnRoSW5kZXggPSAkLmluQXJyYXkoY3VycmVudE1vbnRoLnRvTG93ZXJDYXNlKCksIG1vbnRocyk7XHJcbiAgICB2YXIgY3VycmVudFllYXIgPSAkKCcudWktZGF0ZXBpY2tlci10aXRsZSAudWktZGF0ZXBpY2tlci15ZWFyJykudGV4dCgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB2YXIgYWRqYWNlbnRJbmRleCA9IChpc05leHQpID8gbW9udGhJbmRleCArIDEgOiBtb250aEluZGV4IC0gMTtcclxuXHJcbiAgICBpZiAoaXNOZXh0ICYmIGN1cnJlbnRNb250aCA9PT0gJ2RlY2VtYmVyJykge1xyXG4gICAgICAgIGN1cnJlbnRZZWFyID0gcGFyc2VJbnQoY3VycmVudFllYXIsIDEwKSArIDE7XHJcbiAgICAgICAgYWRqYWNlbnRJbmRleCA9IDA7XHJcbiAgICB9IGVsc2UgaWYgKCFpc05leHQgJiYgY3VycmVudE1vbnRoID09PSAnamFudWFyeScpIHtcclxuICAgICAgICBjdXJyZW50WWVhciA9IHBhcnNlSW50KGN1cnJlbnRZZWFyLCAxMCkgLSAxO1xyXG4gICAgICAgIGFkamFjZW50SW5kZXggPSBtb250aHMubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25UZXh0ID0gKGlzTmV4dClcclxuICAgICAgICA/ICdOZXh0IE1vbnRoLCAnICsgZmlyc3RUb0NhcChtb250aHNbYWRqYWNlbnRJbmRleF0pICsgJyAnICsgY3VycmVudFllYXJcclxuICAgICAgICA6ICdQcmV2aW91cyBNb250aCwgJyArIGZpcnN0VG9DYXAobW9udGhzW2FkamFjZW50SW5kZXhdKSArICcgJyArIGN1cnJlbnRZZWFyO1xyXG5cclxuICAgICQoYnV0dG9uKS5maW5kKCcudWktaWNvbicpLmh0bWwoYnV0dG9uVGV4dCk7XHJcblxyXG59XHJcblxyXG4vLyBSZXR1cm5zIHRoZSBzdHJpbmcgd2l0aCB0aGUgZmlyc3QgbGV0dGVyIGNhcGl0YWxpemVkXHJcbmZ1bmN0aW9uIGZpcnN0VG9DYXAocykge1xyXG4gICAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/search/datepicker.js\n");

/***/ })

/******/ });