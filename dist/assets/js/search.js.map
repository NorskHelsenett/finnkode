{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/search.js","webpack:///./src/js/search/datepicker.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,mBAAO,CAAC,0DAAqB,E;;;;;;;;;;;ACA7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS,4CAA4C;AACrD;AACA,4DAA4D;AAC5D;AACA,aAAa,mDAAmD;AAChE;AACA,aAAa,qDAAqD;AAClE;AACA,aAAa,qDAAqD;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,wBAAwB;AACjC;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA,SAAS,yBAAyB;AAClC;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,YAAY,YAAY;AACxB,YAAY,YAAY;AACxB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,YAAY,YAAY;AACxB,YAAY,YAAY;AACxB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;AAC5C;AACA;AACA,sBAAsB,aAAa,EAAE,YAAY,EAAE,cAAc,EAAE;AACnE;AACA;AACA;AACA,KAAK;AACL;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,C","file":"search.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/search.js\");\n","require('./search/datepicker');","// https://dequeuniversity.com/library/aria/date-pickers/sf-date-picker\r\n// console.log(\"search.js - datepicker.js\");\r\n\r\n$(function () {\r\n    $('#datepicker').datepicker({\r\n        showOn: 'button',\r\n        buttonImage: '/assets/images/calendar-blue.svg', // File (and file path) for the calendar image\r\n        buttonImageOnly: false,\r\n        buttonText: 'Vis kalender',\r\n        dayNamesShort: [ \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\", \"Søndag\" ],\r\n        showButtonPanel: true,\r\n        closeText: 'Lukk',\r\n        onClose: removeAria\r\n    });\r\n\r\n    // Add aria-describedby to the button referring to the label\r\n    $('.ui-datepicker-trigger').attr('aria-labelledby', 'datepickerLabel');\r\n\r\n    dayTripper();\r\n\r\n});\r\n\r\nfunction dayTripper() {\r\n    $('.ui-datepicker-trigger').click(function () {\r\n        setTimeout(function () {\r\n            var today = $('.ui-datepicker-today a')[0];\r\n\r\n            if (!today) {\r\n                today = $('.ui-state-active')[0] ||\r\n                    $('.ui-state-default')[0];\r\n            }\r\n\r\n\r\n            // Hide the entire page (except the date picker)\r\n            // from screen readers to prevent document navigation\r\n            // (by headings, etc.) while the popup is open\r\n            $(\"main\").attr('id','dp-container');\r\n            $(\"#dp-container\").attr('aria-hidden','true');\r\n            $(\"#skipnav\").attr('aria-hidden','true');\r\n\r\n            // Hide the \"today\" button because it doesn't do what\r\n            // you think it supposed to do\r\n            $(\".ui-datepicker-current\").hide();\r\n\r\n            today.focus();\r\n            datePickHandler();\r\n            $(document).on('click', '#ui-datepicker-div .ui-datepicker-close', function () {\r\n                closeCalendar();\r\n            });\r\n        }, 0);\r\n    });\r\n}\r\n\r\nfunction datePickHandler() {\r\n    var activeDate;\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    var input = document.getElementById('datepicker');\r\n\r\n    if (!container || !input) {\r\n        return;\r\n    }\r\n\r\n    // $(container).find('table').first().attr('role', 'grid');\r\n\r\n    container.setAttribute('role', 'application');\r\n    container.setAttribute('aria-label', 'Calendar view date-picker');\r\n\r\n    // the top controls:\r\n    var prev = $('.ui-datepicker-prev', container)[0],\r\n        next = $('.ui-datepicker-next', container)[0];\r\n\r\n\r\n// This is the line that needs to be fixed for use on pages with base URL set in head\r\n    next.href = 'javascript:void(0)';\r\n    prev.href = 'javascript:void(0)';\r\n\r\n    next.setAttribute('role', 'button');\r\n    next.removeAttribute('title');\r\n    prev.setAttribute('role', 'button');\r\n    prev.removeAttribute('title');\r\n\r\n    appendOffscreenMonthText(next);\r\n    appendOffscreenMonthText(prev);\r\n\r\n    // delegation won't work here for whatever reason, so we are\r\n    // forced to attach individual click listeners to the prev /\r\n    // next month buttons each time they are added to the DOM\r\n    $(next).on('click', handleNextClicks);\r\n    $(prev).on('click', handlePrevClicks);\r\n\r\n    monthDayYearText();\r\n\r\n    $(container).on('keydown', function calendarKeyboardListener(keyVent) {\r\n        var which = keyVent.which;\r\n        var target = keyVent.target;\r\n        var dateCurrent = getCurrentDate(container);\r\n\r\n        if (!dateCurrent) {\r\n            dateCurrent = $('a.ui-state-default')[0];\r\n            setHighlightState(dateCurrent, container);\r\n        }\r\n\r\n        if (27 === which) {\r\n            keyVent.stopPropagation();\r\n            return closeCalendar();\r\n        } else if (which === 9 && keyVent.shiftKey) { // SHIFT + TAB\r\n            keyVent.preventDefault();\r\n            if ($(target).hasClass('ui-datepicker-close')) { // close button\r\n                $('.ui-datepicker-prev')[0].focus();\r\n            } else if ($(target).hasClass('ui-state-default')) { // a date link\r\n                $('.ui-datepicker-close')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) { // the prev link\r\n                $('.ui-datepicker-next')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) { // the next link\r\n                activeDate = $('.ui-state-highlight') ||\r\n                    $('.ui-state-active')[0];\r\n                if (activeDate) {\r\n                    activeDate.focus();\r\n                }\r\n            }\r\n        } else if (which === 9) { // TAB\r\n            keyVent.preventDefault();\r\n            if ($(target).hasClass('ui-datepicker-close')) { // close button\r\n                activeDate = $('.ui-state-highlight') ||\r\n                    $('.ui-state-active')[0];\r\n                if (activeDate) {\r\n                    activeDate.focus();\r\n                }\r\n            } else if ($(target).hasClass('ui-state-default')) {\r\n                $('.ui-datepicker-next')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) {\r\n                $('.ui-datepicker-prev')[0].focus();\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) {\r\n                $('.ui-datepicker-close')[0].focus();\r\n            }\r\n        } else if (which === 37) { // LEFT arrow key\r\n            // if we're on a date link...\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                previousDay(target);\r\n            }\r\n        } else if (which === 39) { // RIGHT arrow key\r\n            // if we're on a date link...\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                nextDay(target);\r\n            }\r\n        } else if (which === 38) { // UP arrow key\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                upHandler(target, container, prev);\r\n            }\r\n        } else if (which === 40) { // DOWN arrow key\r\n            if (!$(target).hasClass('ui-datepicker-close') && $(target).hasClass('ui-state-default')) {\r\n                keyVent.preventDefault();\r\n                downHandler(target, container, next);\r\n            }\r\n        } else if (which === 13) { // ENTER\r\n            if ($(target).hasClass('ui-state-default')) {\r\n                setTimeout(function () {\r\n                    closeCalendar();\r\n                }, 100);\r\n            } else if ($(target).hasClass('ui-datepicker-prev')) {\r\n                handlePrevClicks();\r\n            } else if ($(target).hasClass('ui-datepicker-next')) {\r\n                handleNextClicks();\r\n            }\r\n        } else if (32 === which) {\r\n            if ($(target).hasClass('ui-datepicker-prev') || $(target).hasClass('ui-datepicker-next')) {\r\n                target.click();\r\n            }\r\n        } else if (33 === which) { // PAGE UP\r\n            moveOneMonth(target, 'prev');\r\n        } else if (34 === which) { // PAGE DOWN\r\n            moveOneMonth(target, 'next');\r\n        } else if (36 === which) { // HOME\r\n            var firstOfMonth = $(target).closest('tbody').find('.ui-state-default')[0];\r\n            if (firstOfMonth) {\r\n                firstOfMonth.focus();\r\n                setHighlightState(firstOfMonth, $('#ui-datepicker-div')[0]);\r\n            }\r\n        } else if (35 === which) { // END\r\n            var $daysOfMonth = $(target).closest('tbody').find('.ui-state-default');\r\n            var lastDay = $daysOfMonth[$daysOfMonth.length - 1];\r\n            if (lastDay) {\r\n                lastDay.focus();\r\n                setHighlightState(lastDay, $('#ui-datepicker-div')[0]);\r\n            }\r\n        }\r\n        $(\".ui-datepicker-current\").hide();\r\n    });\r\n}\r\n\r\nfunction closeCalendar() {\r\n    var container = $('#ui-datepicker-div');\r\n    $(container).off('keydown');\r\n    var input = $('#datepicker')[0];\r\n    $(input).datepicker('hide');\r\n\r\n    input.focus();\r\n}\r\n\r\nfunction removeAria() {\r\n    // make the rest of the page accessible again:\r\n    $(\"#dp-container\").removeAttr('aria-hidden');\r\n    $(\"#skipnav\").removeAttr('aria-hidden');\r\n}\r\n\r\n///////////////////////////////\r\n//////////////////////////// //\r\n///////////////////////// // //\r\n// UTILITY-LIKE THINGS // // //\r\n///////////////////////// // //\r\n//////////////////////////// //\r\n///////////////////////////////\r\nfunction isOdd(num) {\r\n    return num % 2;\r\n}\r\n\r\nfunction moveOneMonth(currentDate, dir) {\r\n    var button = (dir === 'next')\r\n        ? $('.ui-datepicker-next')[0]\r\n        : $('.ui-datepicker-prev')[0];\r\n\r\n    if (!button) {\r\n        return;\r\n    }\r\n\r\n    var ENABLED_SELECTOR = '#ui-datepicker-div tbody td:not(.ui-state-disabled)';\r\n    var $currentCells = $(ENABLED_SELECTOR);\r\n    var currentIdx = $.inArray(currentDate.parentNode, $currentCells);\r\n\r\n    button.click();\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n\r\n        var $newCells = $(ENABLED_SELECTOR);\r\n        var newTd = $newCells[currentIdx];\r\n        var newAnchor = newTd && $(newTd).find('a')[0];\r\n\r\n        while (!newAnchor) {\r\n            currentIdx--;\r\n            newTd = $newCells[currentIdx];\r\n            newAnchor = newTd && $(newTd).find('a')[0];\r\n        }\r\n\r\n        setHighlightState(newAnchor, $('#ui-datepicker-div')[0]);\r\n        newAnchor.focus();\r\n\r\n    }, 0);\r\n\r\n}\r\n\r\nfunction handleNextClicks() {\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n        prepHighlightState();\r\n        $('.ui-datepicker-next').focus();\r\n        $(\".ui-datepicker-current\").hide();\r\n    }, 0);\r\n}\r\n\r\nfunction handlePrevClicks() {\r\n    setTimeout(function () {\r\n        updateHeaderElements();\r\n        prepHighlightState();\r\n        $('.ui-datepicker-prev').focus();\r\n        $(\".ui-datepicker-current\").hide();\r\n    }, 0);\r\n}\r\n\r\nfunction previousDay(dateLink) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!dateLink) {\r\n        return;\r\n    }\r\n    var td = $(dateLink).closest('td');\r\n    if (!td) {\r\n        return;\r\n    }\r\n\r\n    var prevTd = $(td).prev(),\r\n        prevDateLink = $('a.ui-state-default', prevTd)[0];\r\n\r\n    if (prevTd && prevDateLink) {\r\n        setHighlightState(prevDateLink, container);\r\n        prevDateLink.focus();\r\n    } else {\r\n        handlePrevious(dateLink);\r\n    }\r\n}\r\n\r\n\r\nfunction handlePrevious(target) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var currentRow = $(target).closest('tr');\r\n    if (!currentRow) {\r\n        return;\r\n    }\r\n    var previousRow = $(currentRow).prev();\r\n\r\n    if (!previousRow || previousRow.length === 0) {\r\n        // there is not previous row, so we go to previous month...\r\n        previousMonth();\r\n    } else {\r\n        var prevRowDates = $('td a.ui-state-default', previousRow);\r\n        var prevRowDate = prevRowDates[prevRowDates.length - 1];\r\n\r\n        if (prevRowDate) {\r\n            setTimeout(function () {\r\n                setHighlightState(prevRowDate, container);\r\n                prevRowDate.focus();\r\n            }, 0);\r\n        }\r\n    }\r\n}\r\n\r\nfunction previousMonth() {\r\n    var prevLink = $('.ui-datepicker-prev')[0];\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    prevLink.click();\r\n    // focus last day of new month\r\n    setTimeout(function () {\r\n        var trs = $('tr', container),\r\n            lastRowTdLinks = $('td a.ui-state-default', trs[trs.length - 1]),\r\n            lastDate = lastRowTdLinks[lastRowTdLinks.length - 1];\r\n\r\n        // updating the cached header elements\r\n        updateHeaderElements();\r\n\r\n        setHighlightState(lastDate, container);\r\n        lastDate.focus();\r\n\r\n    }, 0);\r\n}\r\n\r\n///////////////// NEXT /////////////////\r\n/**\r\n * Handles right arrow key navigation\r\n * @param  {HTMLElement} dateLink The target of the keyboard event\r\n */\r\nfunction nextDay(dateLink) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!dateLink) {\r\n        return;\r\n    }\r\n    var td = $(dateLink).closest('td');\r\n    if (!td) {\r\n        return;\r\n    }\r\n    var nextTd = $(td).next(),\r\n        nextDateLink = $('a.ui-state-default', nextTd)[0];\r\n\r\n    if (nextTd && nextDateLink) {\r\n        setHighlightState(nextDateLink, container);\r\n        nextDateLink.focus(); // the next day (same row)\r\n    } else {\r\n        handleNext(dateLink);\r\n    }\r\n}\r\n\r\nfunction handleNext(target) {\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var currentRow = $(target).closest('tr'),\r\n        nextRow = $(currentRow).next();\r\n\r\n    if (!nextRow || nextRow.length === 0) {\r\n        nextMonth();\r\n    } else {\r\n        var nextRowFirstDate = $('a.ui-state-default', nextRow)[0];\r\n        if (nextRowFirstDate) {\r\n            setHighlightState(nextRowFirstDate, container);\r\n            nextRowFirstDate.focus();\r\n        }\r\n    }\r\n}\r\n\r\nfunction nextMonth() {\r\n    nextMon = $('.ui-datepicker-next')[0];\r\n    var container = document.getElementById('ui-datepicker-div');\r\n    nextMon.click();\r\n    // focus the first day of the new month\r\n    setTimeout(function () {\r\n        // updating the cached header elements\r\n        updateHeaderElements();\r\n\r\n        var firstDate = $('a.ui-state-default', container)[0];\r\n        setHighlightState(firstDate, container);\r\n        firstDate.focus();\r\n    }, 0);\r\n}\r\n\r\n/////////// UP ///////////\r\n/**\r\n * Handle the up arrow navigation through dates\r\n * @param  {HTMLElement} target   The target of the keyboard event (day)\r\n * @param  {HTMLElement} cont     The calendar container\r\n * @param  {HTMLElement} prevLink Link to navigate to previous month\r\n */\r\nfunction upHandler(target, cont, prevLink) {\r\n    prevLink = $('.ui-datepicker-prev')[0];\r\n    var rowContext = $(target).closest('tr');\r\n    if (!rowContext) {\r\n        return;\r\n    }\r\n    var rowTds = $('td', rowContext),\r\n        rowLinks = $('a.ui-state-default', rowContext),\r\n        targetIndex = $.inArray(target, rowLinks),\r\n        prevRow = $(rowContext).prev(),\r\n        prevRowTds = $('td', prevRow),\r\n        parallel = prevRowTds[targetIndex],\r\n        linkCheck = $('a.ui-state-default', parallel)[0];\r\n\r\n    if (prevRow && parallel && linkCheck) {\r\n        // there is a previous row, a td at the same index\r\n        // of the target AND theres a link in that td\r\n        setHighlightState(linkCheck, cont);\r\n        linkCheck.focus();\r\n    } else {\r\n        // we're either on the first row of a month, or we're on the\r\n        // second and there is not a date link directly above the target\r\n        prevLink.click();\r\n        setTimeout(function () {\r\n            // updating the cached header elements\r\n            updateHeaderElements();\r\n            var newRows = $('tr', cont),\r\n                lastRow = newRows[newRows.length - 1],\r\n                lastRowTds = $('td', lastRow),\r\n                tdParallelIndex = $.inArray(target.parentNode, rowTds),\r\n                newParallel = lastRowTds[tdParallelIndex],\r\n                newCheck = $('a.ui-state-default', newParallel)[0];\r\n\r\n            if (lastRow && newParallel && newCheck) {\r\n                setHighlightState(newCheck, cont);\r\n                newCheck.focus();\r\n            } else {\r\n                // theres no date link on the last week (row) of the new month\r\n                // meaning its an empty cell, so we'll try the 2nd to last week\r\n                var secondLastRow = newRows[newRows.length - 2],\r\n                    secondTds = $('td', secondLastRow),\r\n                    targetTd = secondTds[tdParallelIndex],\r\n                    linkCheck = $('a.ui-state-default', targetTd)[0];\r\n\r\n                if (linkCheck) {\r\n                    setHighlightState(linkCheck, cont);\r\n                    linkCheck.focus();\r\n                }\r\n\r\n            }\r\n        }, 0);\r\n    }\r\n}\r\n\r\n//////////////// DOWN ////////////////\r\n/**\r\n * Handles down arrow navigation through dates in calendar\r\n * @param  {HTMLElement} target   The target of the keyboard event (day)\r\n * @param  {HTMLElement} cont     The calendar container\r\n * @param  {HTMLElement} nextLink Link to navigate to next month\r\n */\r\nfunction downHandler(target, cont, nextLink) {\r\n    nextLink = $('.ui-datepicker-next')[0];\r\n    var targetRow = $(target).closest('tr');\r\n    if (!targetRow) {\r\n        return;\r\n    }\r\n    var targetCells = $('td', targetRow),\r\n        cellIndex = $.inArray(target.parentNode, targetCells), // the td (parent of target) index\r\n        nextRow = $(targetRow).next(),\r\n        nextRowCells = $('td', nextRow),\r\n        nextWeekTd = nextRowCells[cellIndex],\r\n        nextWeekCheck = $('a.ui-state-default', nextWeekTd)[0];\r\n\r\n    if (nextRow && nextWeekTd && nextWeekCheck) {\r\n        // theres a next row, a TD at the same index of `target`,\r\n        // and theres an anchor within that td\r\n        setHighlightState(nextWeekCheck, cont);\r\n        nextWeekCheck.focus();\r\n    } else {\r\n        nextLink.click();\r\n\r\n        setTimeout(function () {\r\n            // updating the cached header elements\r\n            updateHeaderElements();\r\n\r\n            var nextMonthTrs = $('tbody tr', cont),\r\n                firstTds = $('td', nextMonthTrs[0]),\r\n                firstParallel = firstTds[cellIndex],\r\n                firstCheck = $('a.ui-state-default', firstParallel)[0];\r\n\r\n            if (firstParallel && firstCheck) {\r\n                setHighlightState(firstCheck, cont);\r\n                firstCheck.focus();\r\n            } else {\r\n                // lets try the second row b/c we didnt find a\r\n                // date link in the first row at the target's index\r\n                var secondRow = nextMonthTrs[1],\r\n                    secondTds = $('td', secondRow),\r\n                    secondRowTd = secondTds[cellIndex],\r\n                    secondCheck = $('a.ui-state-default', secondRowTd)[0];\r\n\r\n                if (secondRow && secondCheck) {\r\n                    setHighlightState(secondCheck, cont);\r\n                    secondCheck.focus();\r\n                }\r\n            }\r\n        }, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction onCalendarHide() {\r\n    closeCalendar();\r\n}\r\n\r\n// add an aria-label to the date link indicating the currently focused date\r\n// (formatted identically to the required format: mm/dd/yyyy)\r\nfunction monthDayYearText() {\r\n    var cleanUps = $('.amaze-date');\r\n\r\n    $(cleanUps).each(function (clean) {\r\n        // each(cleanUps, function (clean) {\r\n        clean.parentNode.removeChild(clean);\r\n    });\r\n\r\n    var datePickDiv = document.getElementById('ui-datepicker-div');\r\n    // in case we find no datepick div\r\n    if (!datePickDiv) {\r\n        return;\r\n    }\r\n\r\n    var dates = $('a.ui-state-default', datePickDiv);\r\n    $(dates).attr('role', 'button').on('keydown', function (e) {\r\n        if (e.which === 32) {\r\n            e.preventDefault();\r\n            e.target.click();\r\n            setTimeout(function () {\r\n                closeCalendar();\r\n            }, 100);\r\n        }\r\n    });\r\n    $(dates).each(function (index, date) {\r\n        var currentRow = $(date).closest('tr'),\r\n            currentTds = $('td', currentRow),\r\n            currentIndex = $.inArray(date.parentNode, currentTds),\r\n            headThs = $('thead tr th', datePickDiv),\r\n            dayIndex = headThs[currentIndex],\r\n            daySpan = $('span', dayIndex)[0],\r\n            monthName = $('.ui-datepicker-month', datePickDiv)[0].innerHTML,\r\n            year = $('.ui-datepicker-year', datePickDiv)[0].innerHTML,\r\n            number = date.innerHTML;\r\n\r\n        if (!daySpan || !monthName || !number || !year) {\r\n            return;\r\n        }\r\n\r\n        // AT Reads: {month} {date} {year} {day}\r\n        // \"December 18 2014 Thursday\"\r\n        var dateText = date.innerHTML + ' ' + monthName + ' ' + year + ' ' + daySpan.title;\r\n        // AT Reads: {date(number)} {name of day} {name of month} {year(number)}\r\n        // var dateText = date.innerHTML + ' ' + daySpan.title + ' ' + monthName + ' ' + year;\r\n        // add an aria-label to the date link reading out the currently focused date\r\n        date.setAttribute('aria-label', dateText);\r\n    });\r\n}\r\n\r\n\r\n\r\n// update the cached header elements because we're in a new month or year\r\nfunction updateHeaderElements() {\r\n    var context = document.getElementById('ui-datepicker-div');\r\n    if (!context) {\r\n        return;\r\n    }\r\n\r\n//  $(context).find('table').first().attr('role', 'grid');\r\n\r\n    prev = $('.ui-datepicker-prev', context)[0];\r\n    next = $('.ui-datepicker-next', context)[0];\r\n\r\n    //make them click/focus - able\r\n    next.href = 'javascript:void(0)';\r\n    prev.href = 'javascript:void(0)';\r\n\r\n    next.setAttribute('role', 'button');\r\n    prev.setAttribute('role', 'button');\r\n    appendOffscreenMonthText(next);\r\n    appendOffscreenMonthText(prev);\r\n\r\n    $(next).on('click', handleNextClicks);\r\n    $(prev).on('click', handlePrevClicks);\r\n\r\n    // add month day year text\r\n    monthDayYearText();\r\n}\r\n\r\n\r\nfunction prepHighlightState() {\r\n    var highlight;\r\n    var cage = document.getElementById('ui-datepicker-div');\r\n    highlight = $('.ui-state-highlight', cage)[0] ||\r\n        $('.ui-state-default', cage)[0];\r\n    if (highlight && cage) {\r\n        setHighlightState(highlight, cage);\r\n    }\r\n}\r\n\r\n// Set the highlighted class to date elements, when focus is received\r\nfunction setHighlightState(newHighlight, container) {\r\n    var prevHighlight = getCurrentDate(container);\r\n    // remove the highlight state from previously\r\n    // highlighted date and add it to our newly active date\r\n    $(prevHighlight).removeClass('ui-state-highlight');\r\n    $(newHighlight).addClass('ui-state-highlight');\r\n}\r\n\r\n\r\n// grabs the current date based on the highlight class\r\nfunction getCurrentDate(container) {\r\n    var currentDate = $('.ui-state-highlight', container)[0];\r\n    return currentDate;\r\n}\r\n\r\n/**\r\n * Appends logical next/prev month text to the buttons\r\n * - ex: Next Month, January 2015\r\n *       Previous Month, November 2014\r\n */\r\nfunction appendOffscreenMonthText(button) {\r\n    var buttonText;\r\n    var isNext = $(button).hasClass('ui-datepicker-next');\r\n    var months = [\r\n        'january', 'february',\r\n        'march', 'april',\r\n        'may', 'june', 'july',\r\n        'august', 'september',\r\n        'october',\r\n        'november', 'december'\r\n    ];\r\n\r\n    var currentMonth = $('.ui-datepicker-title .ui-datepicker-month').text().toLowerCase();\r\n    var monthIndex = $.inArray(currentMonth.toLowerCase(), months);\r\n    var currentYear = $('.ui-datepicker-title .ui-datepicker-year').text().toLowerCase();\r\n    var adjacentIndex = (isNext) ? monthIndex + 1 : monthIndex - 1;\r\n\r\n    if (isNext && currentMonth === 'december') {\r\n        currentYear = parseInt(currentYear, 10) + 1;\r\n        adjacentIndex = 0;\r\n    } else if (!isNext && currentMonth === 'january') {\r\n        currentYear = parseInt(currentYear, 10) - 1;\r\n        adjacentIndex = months.length - 1;\r\n    }\r\n\r\n    buttonText = (isNext)\r\n        ? 'Next Month, ' + firstToCap(months[adjacentIndex]) + ' ' + currentYear\r\n        : 'Previous Month, ' + firstToCap(months[adjacentIndex]) + ' ' + currentYear;\r\n\r\n    $(button).find('.ui-icon').html(buttonText);\r\n\r\n}\r\n\r\n// Returns the string with the first letter capitalized\r\nfunction firstToCap(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}"],"sourceRoot":""}